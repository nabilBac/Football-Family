<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Vidéos - Football Family</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <h1>Vidéos Football Family</h1>

    <form method="get" th:action="@{/videos/list}">
        <label>Filtrer par catégorie :</label>
        <select name="category">
            <option value="">Toutes</option>
            <option value="Entraînement">Entraînement</option>
            <option value="Match">Match</option>
            <option value="Technique">Technique</option>
        </select>
        <button type="submit">Filtrer</button>
    </form>

    <div class="video-grid" th:if="${videos != null}">
       <div class="video-card" th:each="videoDto : ${videos}">
    
    <h3 th:text="${videoDto.title}">Titre vidéo</h3> 
    
    <p>Catégorie : <span th:text="${videoDto.category}"></span></p>
    
    <p>Posté par : <span th:text="${videoDto.uploaderUsername}"></span></p> 
    
    <p>Date : 
        <span th:text="${videoDto.dateUpload != null ? #temporals.format(videoDto.dateUpload, 'dd/MM/yyyy HH:mm') : 'N/A'}"></span>
    </p>

    <video width="320" height="240" controls>
        <source th:src="@{/videos/{filename}(filename=${videoDto.filename})}" type="video/mp4">
        Votre navigateur ne supporte pas la lecture vidéo.
    </video>
    
    <div class="actions">
        <span th:text="${videoDto.likesCount} + ' Likes'">50 Likes</span> 
        
        <span th:if="${videoDto.likedByCurrentUser}" style="color: green;">(Aimé)</span>
        <span th:unless="${videoDto.likedByCurrentUser}" style="color: gray;">(À aimer)</span>
    </div>
    
</div>
    </div>

    <a th:href="@{/videos/upload}" class="btn-primary">Ajouter une vidéo</a>
</div>
</body>
</html>